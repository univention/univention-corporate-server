<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE chapter PUBLIC "-//OASIS//DTD DocBook XML V4.5//EN"
	"http://www.oasis-open.org/docbook/xml/4.5/docbookx.dtd" [
	<!ENTITY % extensions SYSTEM "../stylesheets/macros.ent" >
	%extensions;
	<!ENTITY % entities SYSTEM "../stylesheets/macros-en.ent" >
	%entities;
]>
<chapter id="relnotes:changelog" lang="en" xmlns:u="https://docs.software-univention.de/2015-02-25/">
	<title>Changelog</title>
	<section id="changelog:general">
		<title>General</title>
		<itemizedlist>
			<listitem><simpara>
					 (<u:bug>00000</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				The Python module directories of <package>python-support</package> are not supported anymore (<u:bug>51506</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				Systems can only join into the domain with at least UCS 4.4-8 (<u:bug>51625</u:bug>). If the Primary Directory Node was installed as UCS 5.0,
				certain database objects are no longer created; thus, joining UCS 4.4-8 systems may result in these systems not having a proper portal until
				they upgrade to UCS 5.0 (<u:bug>53091</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				The upgrade to UCS 5.0 is blocked if there are systems in the domain which don't have at least UCS 4.4-8 (<u:bug>51621</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				The legacy terms for the UCS server roles &ucsMaster;, &ucsBackup;, &ucsSlave; and &ucsMember;
				have been replaced by the new terms &ucsPrimaryDN; , &ucsBackupDN; &ucsReplicaDN; and &ucsManagedNode;,
				which more clearly convey their inherent purpose as providing directory services or not.
				The Microsoft terms <emphasis>domain controller</emphasis>, <emphasis>DC</emphasis> and <emphasis>member server</emphasis>
				are still applicable in case Microsoft compatible services are provided by Samba on the respective Node (<u:bug>42374</u:bug>).
				To reduce potential for confusion, the IP managed client has been renamed to IP client.
			</simpara></listitem>
			<listitem><simpara>
				The <emphasis>base system</emphasis> is no longer a valid system role.
				It is not possible to choose that role in system setup or update a base system to UCS 5.
				The corresponding meta package <package>univention-basesystem</package> has
				been removed (<u:bug>52137</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				Process supervision by <package>univention-runit</package> has been replaced with <package>systemd</package> (<u:bug>52448</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				The selection on locales has been fixed in <package>univention-directory-reports</package>, <package>univention-appcenter</package>, <package>univention-system-setup</package>  and <package>univention-management-console</package> (<u:bug>52194</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
					The command <command>lastlog</command> can now be called by any user.
					It shows the timestamp when users have logged on to the local machine.
					This command reads the information maintained in the file <filename>/var/log/lastlog</filename>.
					Before UCS 5.0 this file was only readable by user <systemitem class="username">root</systemitem>.
					Debian and <systemitem class="service">systemd</systemitem> have this file world readable be default.
					UCS decided to follow this upstream policy, because a list of all users is accessible via <command>getent passwd</command> anyway (<u:bug>51579</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				The join scripts for <command>univention-s4-connector</command> and <command>univention-appcenter</command> now start <command>ucs_registerLDAPExtension</command> with the options <option>--ucsversionstart</option> and <option>--ucsversionstop</option> to signal compatibility with Python 3 (<u:bug>51763</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				Join scripts are not executed with the unsafe option <option>--bindpwd</option> anymore (<u:bug>31996</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				Installed unsupported packages will now block the upgrade until they are removed from the system (<u:bug>52957</u:bug>)
			</simpara></listitem>
		</itemizedlist>
	</section>

	<section id="changelog:installer">
		<title>Univention Installer</title>
		<itemizedlist>
			<listitem><simpara>
				The package <package>univention-net-installer</package> has been migrated to Python 3 (<u:bug>52283</u:bug>)
			</simpara></listitem>
		</itemizedlist>
	</section>

	<section id="changelog:basic">
		<title>Basic system services</title>

		<section id="changelog:basic:kernel">
			<title>Linux kernel and firmware packages</title>
			<itemizedlist>
				<listitem><simpara>
					The new command <command>univention-prune-kernels</command> can be used to more easily remove Linux kernel packages, which are no longer used and required (<u:bug>51769</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:basis:ucr">
			<title>Univention Configuration Registry</title>
			<itemizedlist>
				<listitem><simpara>
					A new API has been introduced to simplify accessing UCR from Python.
					It is based on the singleton pattern and optionally provides an auto-updating view  (<u:bug>51126</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
						Document &ucsUCRV; <envar>interfaces/.*/hosts</envar> (<u:bug>33743</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					<command>univention-install-config-registry</command> calls <command>univention-install-config-registry-info</command> and <command>univention-install-service-info</command> during package build time.
					It now propagates failures and aborts if calling those programs fails (<u:bug>32658</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The API for registration of UCR modules is now unified to match the regular arguments of the handler functions (<u:bug>30127</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					Default values for &ucsUCRV;s can now be defined in the files <filename class="extension">.univention-config-registry-variables</filename> (<u:bug>38938</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The performance of <command>ucr shell</command> has been improved (<u:bug>31257</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					To simplify software development &ucsUCR; now provides the sequence <command>ucr</command> to be used with <command>dh --with ucr</command> in <filename>debian/rules</filename> instead of calling <command>univention-install-*</command> directly (<u:bug>51950</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The scripts of <package>univention-config-registry</package> have been migrated to Python 3 (<u:bug>52018</u:bug>, <u:bug>52157</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The API of <command>univention.config_registry.interfaces</command> is now using the <package>ipaddress</package> module instead of the <package>ipaddr</package> module (<u:bug>52017</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The detection of children process IDs in <command>univention.service_info</command> has been fixed (<u:bug>51524</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The old name <command>univention-baseconf</command> has been removed (<u:bug>52016</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					Different layers of the registry are now taken into account when deciding if and how to run &ucsUCR; trigger mechanisms, meaning that the trigger will now be called with what is actually visible for &ucsUCR; (<u:bug>52847</u:bug>)
				</simpara></listitem>
			</itemizedlist>

			<section id="changelog:basis:ucr:template">
				<title>Changes to templates and modules</title>
				<itemizedlist>
					<listitem><simpara>
						The updates of configuration files in Debian 10 have been merged into the &ucsUCR; template files (<u:bug>51505</u:bug>)
					</simpara></listitem>
				</itemizedlist>
			</section>
		</section>

		<section id="changelog:basis:boot">
			<title>Boot Loader</title>
			<itemizedlist>
				<listitem><simpara>
						The boot process has been adjusted to the new design. It is possible to switch between a dark theme (default) by setting <command>ucr set bootsplash/theme='ucs'</command> and a light theme by setting <command>ucr set bootsplash/theme='ucs-light'</command> (<u:bug>52797</u:bug>, <u:bug>52798</u:bug>, <u:bug>52454</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:basis:other">
			<title>Other system services</title>
			<itemizedlist>
				<listitem><simpara>
					The return code of <command>univention-run-join-scripts</command> indicates errors now (<u:bug>35561</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					Join scripts are only executed if the host is already joined (<u:bug>48730</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The new package <package>univention-join-dev</package> provides the <application>Debhelper</application> sequence <literal>univention-join</literal>.
					It can be used in <filename>debian/rules</filename> files with <command>dh --with univention-join</command> to simplify the installation, registration and calling of join scripts.
					It replaces <command>univention-install-joinscript</command> from the package <package>univention-debhelper</package>, which will be removed with UCS 5.1  (<u:bug>52211</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					To prevent problems with UCS components that are only partly updated at the time join scripts are executed,
					the execution of join scripts is from now on postponed until the end of the update process (postup phase).
					This change has been implemented with UCS 4.4-6 but becomes now active (<u:bug>51624</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					AppArmor is deactivated by default, because <package>cups</package> and <package>bind9</package> with <package>samba</package> are not configured for it yet (<u:bug>51786</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The Admin Diary has been migrated to Python 3 (<u:bug>51334</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					Since <package>squid</package> version <literal>4.6</literal> the authentication helper <command>basic_ldap_auth</command> returns <literal>BH Success</literal> instead of <literal>ERR Success</literal> in case of LDAP bind errors. The encoding wrapper has been adjusted accordingly (<u:bug>51817</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>
	</section>

	<section id="changelog:domain">
		<title>Domain services</title>

		<itemizedlist>
			<listitem><simpara>
				Support for <package>ifplugd</package> has been removed (<u:bug>32847</u:bug>)
			</simpara></listitem>
		</itemizedlist>

		<section id="changelog:domain:openldap">
			<title>OpenLDAP</title>
			<itemizedlist>
				<listitem><simpara>
					<package>OpenLDAP</package> has been updated to version 2.4.47 (<u:bug>51312</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The container <uri>cn=admin-settings,cn=users,cn=policies</uri> is no longer created (<u:bug>47949</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The scripts in <package>univention-ldap</package> have been migrated to Python 3 (<u:bug>52280</u:bug>)
				</simpara></listitem>
			</itemizedlist>

			<section id="changelog:domain:openldap:acl">
				<title>LDAP ACL changes</title>
				<itemizedlist>
					<listitem><simpara>
						The container <uri>cn=admin-settings,cn=univention</uri> is no longer created (<u:bug>31048</u:bug>)
					</simpara></listitem>
				</itemizedlist>
			</section>

			<section id="changelog:domain:openldap:schema">
				<title>LDAP schema changes</title>
				<itemizedlist>
					<listitem><simpara>
						The performance of creating <filename>/etc/ldap/slapd.conf</filename> has been improved (<u:bug>34003</u:bug>)
					</simpara></listitem>
				</itemizedlist>
			</section>

			<section id="changelog:domain:openldap:index">
				<title>LDAP index changes</title>
				<itemizedlist>
					<listitem><simpara>
						The LDAP attributes <property>aAAARecord</property>, <property>mXRecord</property>, <property>cNAMERecord</property>, <property>sRVRecord</property>, <property>tXTRecord</property> and <property>nSRecord</property> now get indexed to improve the performance of presence searches in the UDM module <classname>dns/txt_record</classname> (<u:bug>53192</u:bug>)
					</simpara></listitem>
				</itemizedlist>
			</section>

			<section id="changelog:domain:openldap:replication">
				<title>Listener/Notifier domain replication</title>
				<itemizedlist>
					<listitem><simpara>
						The last remainders for <wordasword>replog</wordasword> replication have been removed (<u:bug>42334</u:bug>)
					</simpara></listitem>
					<listitem><simpara>
						Adjustments in the use of <package>python-ldap</package> have been made (<u:bug>51268</u:bug>)
					</simpara></listitem>
					<listitem><simpara>
							The process supervision for the listener and notifier services has been changed from <package>runit</package> to <package>systemd</package>. Any direct calls to the <command>init</command> script or <command>runsv</command>, for example <command>/etc/init.d/univention-directory-listener start</command> or <command>sv start univention-directory-listener</command>, need to be replaced with <command>systemctl</command>, for example <command>systemctl start univention-directory-listener</command> (<u:bug>43686</u:bug>, <u:bug>43687</u:bug>)
					</simpara></listitem>
					<listitem><simpara>
						The Listener has been migrated to Python 3. All listener modules are now executed with Python 3.7 (<u:bug>52256</u:bug>, <u:bug>45888</u:bug>)
					</simpara></listitem>
					<listitem><simpara>
							A new API for switching the effective user ID in Listener modules has been added.
							The new <literal>listener.SetUID()</literal> can be used as a Python context manager and function decorator.
							The old API using <literal>listener.setuid()</literal> and <literal>listener.unsettuid()</literal> is deprecated and should no longer be used (<u:bug>52447</u:bug>)
					</simpara></listitem>
					<listitem><simpara>
						The package <package>univention-directory-replication</package> has been migrated to Python 3 (<u:bug>52300</u:bug>)
					</simpara></listitem>
				</itemizedlist>
			</section>
		</section>

		<section id="changelog:domain:dnsserver">
			<title>DNS server</title>
			<itemizedlist>
				<listitem><simpara>
					The package <package>univention-bind</package> now makes sure, that the nameserver BIND is able
					to start early in the system-setup phase of UCS installation, so the DNS service is available
					during install/configuration of UCS components (<u:bug>44462</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The package <package>univention-bind</package> has been migrated to Python 3 (<u:bug>52260</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					UCS systems are able to automatically use name servers that are
					transmitted to the UCS system via DHCP. Starting with UCS 5.0 the mechanism has been simplified
					considerably. UCS systems that obtain their IP address via DHCP now also enter the name servers
					supplied via DHCP in the &ucsUCRV;s <envar>nameserver1..3</envar> and <envar>dns/forwarder1..3</envar>.
					The nameserver type (external forwarder vs. domain nameserver) is detected based on heuristics.
					This change prevents overwriting of the DNS configuration if the UCR template for the file
					<filename>/etc/resolv.conf</filename> is reevaluated (<u:bug>44462</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
						&ucsUCRV; <envar>dns/master/port</envar> has been removed (<u:bug>32188</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
						Trailing semicolons from several &ucsUCRV;s <envar>dns/<replaceable>*</replaceable></envar> are now stripped by default to prevent syntax errors (<u:bug>32188</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
						A syntax error has been fixed which prevented the <command>bind</command> service to start during the system setup (<u:bug>53064</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>
	</section>

	<section id="changelog:umc">
		<title>Univention Management Console</title>

		<section id="changelog:umc:web">
			<title>Univention Management Console web interface</title>
			<itemizedlist>
				<listitem><simpara>
					&ucsUMC; now comes with a new design (<u:bug>52453</u:bug>, <u:bug>52538</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The cookie <property>UMCLang</property> is now correctly saved when accessing &ucsUMC; with a language in the query string (<u:bug>44718</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The <package>debhelper</package> scripts for &ucsUMC; modules now preserve timestamps when installing files (<u:bug>49618</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The exit code of <package>univention-management-console-command</package> has been improved (<u:bug>34642</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The welcome dialog shown after the first installation has been removed (<u:bug>53226</u:bug>) in favor of a dedicated welcome module (<package>univention-management-console-module-welcome</package>) (<u:bug>53147</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					<package>Dojo</package> has been upgraded to Version 1.16.3 (<u:bug>48963</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					A error message in the logfiles is now prevented when local users login into &ucsUMC; (<u:bug>46932</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:portal">
			<title>Univention Portal</title>
			<itemizedlist>
				<listitem><simpara>
					The creation of the portal entry for the <ulink url="https://www.univention.com/news/blog-en/">Univention Blog</ulink> has been fixed when installing from DVD (<u:bug>45787</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The portal is now modularized and can be generously configured (<u:bug>52512</u:bug>, <u:bug>52125</u:bug>, <u:bug>51197</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The portal server can now serve multiple paths (&ucsUCRV; <envar>portal/paths</envar>). Consequently, different portal content can be served for different paths (<u:bug>52792</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					Links can now be localized, i.e. the tiles point to different URLs depending on the user's locale (<u:bug>45918</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					Only one portal setup is created by default. All UCS systems initially show the same portal (<u:bug>53091</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The portal can now be configured to show UMC modules for the current user. A portal only dedicated to UMC modules is also added, effectively replacing the UMC overview (although that still exists) (<u:bug>52932</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					New Icons for the UMC modules on the portal page has been added (<u:bug>52941</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:server">
			<title>Univention Management Console server</title>
			<itemizedlist>
				<listitem><simpara>
						The packages <package>univention-doc</package> and <package>univention-management-console-doc</package> have been removed.
						The UMC API documentation is now available <ulink url="https://docs.software-univention.de/ucs-python-api/"/> (<u:bug>51487</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The &ucsUMC; is now running with Python 3 (<u:bug>51508</u:bug>, <u:bug>52764</u:bug>, <u:bug>49392</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					Sessions are not bound to IP addresses anymore if the request comes from localhost (<u:bug>52935</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:appcenter">
			<title>Univention App Center</title>
			<itemizedlist>
				<listitem><simpara>
					The App Center has been migrated to Python 3 (<u:bug>51598</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The App Center can now install multiple Apps at once. It also resolves dependencies between Apps automatically during install (<u:bug>40225</u:bug>, <u:bug>52863</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					Apps can now define in which way they want to be opened in the new Univention Portal (<u:bug>53161</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:udmcli">
			<title>&ucsUDM; UMC modules and command line interface</title>
			<itemizedlist>
				<listitem><simpara>
					The &ucsUDM; has been migrated to Python 3 (<u:bug>50648</u:bug>, <u:bug>51631</u:bug>, <u:bug>50617</u:bug>, <u:bug>51685</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The modules for handling <foreignphrase>Mobile clients</foreignphrase>, <foreignphrase>Fat Clients</foreignphrase>, <foreignphrase>Thin Clients</foreignphrase>, <foreignphrase>Univention Corporate Clients</foreignphrase> and their policies and settings have been removed (<u:bug>51973</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The unused script <filename>lock_expired_passwords</filename> has been removed (<u:bug>46350</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					No traceback is logged anymore when creating objects with <option>--ignore_exists</option> when the objects already exists (<u:bug>46931</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					UDM handlers now raise an exception <classname>univention.admin.uexceptions.wrongObjectType</classname> when an object is opened with a wrong type (<u:bug>45096</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					Old references to <property>TCP</property> in the <filename>univention-cli-server</filename> have been removed (<u:bug>34836</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					If an error occurs during object creation in the post-create phase the object is now removed correctly (<u:bug>51669</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					 The <package>apache</package> configuration for the &ucsUDM; REST API has been adjusted for the new <package>apache</package> version (<u:bug>51604</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The &ucsUDM; UMC module has been migrated to Python 3 (<u:bug>51329</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The &ucsUDM; CLI command <command>modify</command> now supports the option <option>--ignore_not_exists</option> (<u:bug>52984</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The <option>--remove</option> option for the &ucsUDM; CLI command <command>modify</command> has been repaired for properties with <property>complex</property> syntax (<u:bug>41072</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:setup">
			<title>Modules for system settings / setup wizard</title>
			<itemizedlist>
				<listitem><simpara>
					The unused script <filename>ldap_available.sh</filename> has been removed (<u:bug>33008</u:bug>, <u:bug>51683</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The directories for hook scripts have been restored (<u:bug>33029</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:update">
			<title>Software update module</title>
			<itemizedlist>
				<listitem><simpara>
					The <phrase>Easy upgrade mode</phrase> has been removed (<u:bug>40154</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The Updater module now links directly to the pending erratum updates (<u:bug>41646</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The <filename>preup.sh</filename> script executed before a system upgrade now fetches the version of the &ucsPrimaryDN; from LDAP instead of using <command>ssh</command> (<u:bug>40027</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The service <systemitem class="service">univention-maintenance</systemitem> now waits for the DNS service before starting the package maintenance during boot-up (<u:bug>45119</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The deprecated command <command>univention-add-app</command> has been removed in favor of the command <command>univention-app</command> (<u:bug>46474</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					Architecture i386 is no longer supported and cannot be updated to UCS 5 (<u:bug>51972</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					<command>univention-remove</command> no longer updates the package cache before packages are removed (<u:bug>48019</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					UCS 4 package sources will be disabled for the upgrade. A backup can be found under <filename>/etc/apt/sources.list.d/</filename> with the suffix <filename>upgrade500-backup</filename>. The backup will be removed after a successful upgrade (<u:bug>52954</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The <package>at</package> daemon service is configured not to kill any child processes when the service is stopped, which is needed for the upgrade to UCS 5 (<u:bug>52886</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:join">
			<title>Domain join module</title>
			<itemizedlist>
				<listitem><simpara>
					The &ucsUMC; module <package>univention-management-console-module-join</package> has been migrated to Python 3  (<u:bug>51330</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The scripts have been improved for robustness and security (<u:bug>31026</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:user">
			<title>Users module</title>
			<itemizedlist>
				<listitem><simpara>
					 (<u:bug>00000</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:reports">
			<title>Univention Directory Reports</title>
			<itemizedlist>
				<listitem><simpara>
						<package>univention-directory-reports</package> is now using Python 3 (<u:bug>51569</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:computers">
			<title>Computers module</title>
			<itemizedlist>
				<listitem><simpara>
					Removing one of multiple DNS PTR records from a computer has been fixed (<u:bug>53213</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					Creating a new DHCP enabled computer entry without an IP address did create an invalid <classname>dhcp/host</classname> entry (<u:bug>53204</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:dns">
			<title>DNS module</title>
			<itemizedlist>
				<listitem><simpara>
					 (<u:bug>00000</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:dhcp">
			<title>DHCP module</title>
			<itemizedlist>
				<listitem><simpara>
					The process supervision for the DHCP services has been changed from <package>runit</package> to <package>systemd</package>.
					The service has been renamed from <systemitem class="service">univention-dhcp</systemitem> to <systemitem class="service">isc-dhcp-server</systemitem> as used by upstream.
					Any direct calls to the <command>init</command> script or <command>runsv</command> must to be replaced with <command>systemctl</command>, for example <command>systemctl start isc-dhcp-server</command> (<u:bug>43688</u:bug>, <u:bug>52828</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					Hook scripts in <filename class="directory">/etc/dhcp/dhclient-enter-hooks.d/</filename> and <filename class="directory">/etc/dhcp/dhclient-exit-hooks.d/</filename> returning an error no longer abort the <command>dhclient-scipt</command>.
					If the old behavior is required a hook script can use <command>exit</command> as the scripts are sourced and not executed in sub-shells (<u:bug>53172</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					Fix the day of week in leases when fallback to link-local addresses is enabled (<u:bug>44427</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					Remove remaining references to deprecated DHCP version 3 (<u:bug>32462</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					Registering of IP addresses received via DHCP are now registered in the LDAP via the HTTP interface of &ucsUMC; (<u:bug>42128</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:license">
			<title>License module</title>
			<itemizedlist>
				<listitem><simpara>
					 (<u:bug>00000</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:diagnostic">
			<title>System diagnostic module</title>
			<itemizedlist>
				<listitem><simpara>
					The module has been migrated to Python 3. All plugins are now executed with Python 3 (<u:bug>51332</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The diagnostic module <package>22_kdc_service</package> has been updated to work with <wordasword>pyasn1</wordasword> version 0.4 (<u:bug>51507</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:top">
			<title>Process overview module</title>
			<itemizedlist>
				<listitem><simpara>
					The process overview module now uses Python 3 (<u:bug>51323</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:share">
			<title>Shares module</title>
			<itemizedlist>
				<listitem><simpara>
					 (<u:bug>00000</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:policy">
			<title>Policies</title>
			<itemizedlist>
				<listitem><simpara>
						Fix error in output of <command>univention_policy_result --help</command> (<u:bug>35182</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:printer">
			<title>Printers module</title>
			<itemizedlist>
				<listitem><simpara>
					The code for handling <property>univentionPrinterUseClientDriver</property> has been removed from the &ucsUDL; module (<u:bug>32870</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:mail">
			<title>Mail</title>
			<itemizedlist>
				<listitem><simpara>
					 (<u:bug>00000</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:quota">
			<title>Filesystem quota module</title>
			<itemizedlist>
				<listitem><simpara>
					The listener module <filename>quota.py</filename> has been migrated to Python 3 (<u:bug>52310</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:ucr">
			<title>Univention Configuration Registry module</title>
			<itemizedlist>
				<listitem><simpara>
					The &ucsUMC; module <package>univention-management-console-module-ucr</package> has been migrated to Python 3  (<u:bug>51322</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:ldap">
			<title>LDAP directory browser</title>
			<itemizedlist>
				<listitem><simpara>
					 (<u:bug>00000</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:other">
			<title>Other modules</title>
			<itemizedlist>
				<listitem><simpara>
					The unused module for configuring the firewall has been removed (<u:bug>44700</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The old system statistics based on <application>MRTG</application> has been removed (<u:bug>44475</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The &ucsUMC; module <package>univention-management-console-module-services</package> has been migrated to Python 3  (<u:bug>51333</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The &ucsUMC; module <package>univention-management-console-module-ipchange</package> has been migrated to Python 3  (<u:bug>51331</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					 (<u:bug>00000</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:umc:development">
			<title>Development of modules for &ucsUMC;</title>
			<itemizedlist>
				<listitem><simpara>
					To simplify software development &ucsUMC; now provides the sequence <command>umc</command> to be used with <command>dh --with umc</command> in <filename>debian/rules</filename> instead of calling <command>dh-umc-modulel-*</command> directly (<u:bug>51949</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>
	</section>

	<section id="changlog:updater">
		<title>Univention Updater</title>
		<itemizedlist>
			<listitem><simpara>
				The old <literal>dists/</literal> repository layout, which was used between UCS 2.X and 4.x, is no longer supported.
				Instead the new <filename class="directory">pool/</filename>-layout uses package index files below
				<filename class="directory">dists/</filename>, which reference files from <filename class="directory">pool/</filename> (<u:bug>51316</u:bug>, <u:bug>51588</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				Due to the changed repository layout the deprecated &ucsUCRV;s <envar>repository/online/component/4.*-*-errata</envar> are purged after the update (<u:bug>47192</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				Starting with UCS 5.0 the UCS repository is no longer divided into the 2 sections
				<emphasis>maintained</emphasis> and <emphasis>unmaintained</emphasis>. Instead, all packages
				are kept in one section and the maintenance status of the packages is technically defined in
				a different way. Therefore, the &ucsUCRV; <envar>repository/online/unmaintained</envar>
				is no longer in use as of UCS 5.0. However, the &ucsUCRV; for components
				(<envar>repository/online/component/<replaceable>$comp</replaceable>/parts</envar>) are still in use (<u:bug>51316</u:bug>).
				To check if <emphasis>unmaintained</emphasis> packages are installed, the command
				<command>univention-list-installed-unmaintained-packages</command> can be executed (<u:bug>52715</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
				Up to UCS 4.4, the Univention Updater automatically detected for component repositories whether
				the required package files were stored within the architecture directories (<filename class="directory">i386/</filename>,
				<filename class="directory">amd64/</filename>, <filename class="directory">all/</filename>) or in the directory level above (flat repository).
				Starting with UCS 5.0, the new &ucsUCRV; <envar>repository/online/component/<replaceable>$comp</replaceable>/layout</envar>
				must be used to define whether a flat repository (value <literal>flat</literal>) is to be used. If
				the variable is not set, the other possible value <literal>arch</literal> is assumed, where the
				packages files are searched in the architecture directories (<u:bug>51316</u:bug>).
			</simpara></listitem>
			<listitem>
				<simpara>
					The semantics of the &ucsUCRV; <envar>repository/online/component/<replaceable>$comp</replaceable>/version</envar> has changed.
					The values <literal>current</literal> and an unset variable now have the same meaning:
					The component directory is <emphasis>always</emphasis> included and must exists; an update is blocked if it does not and
					APT resp. Univention Updater will error out if it does not.
				</simpara>
				<simpara>
					As an alternative a fixed list of <literal><replaceable>$major</replaceable>.<replaceable>$minor</replaceable></literal> releases can be used to include the
					component only for a sub-set of releases: such a component is only used locally if the listed component
					versions include the current version, e.g. a <literal>5.0 5.1 5.2</literal> component will not be used
					on a <literal>5.3</literal> system.
				</simpara>
				<simpara>
					As a consequence the packages (or at least the <filename>Packages</filename>) files have to be copied for
					a new release if (and only if) the component should also be available for the new release. This is cheap
					if the <filename class="directory">pool/</filename>-layout is used as then only the <filename>Packages</filename> file must be
					copied, which then references the same packages from the <filename class="directory">pool/</filename> directory (Hint: using
					relative links with <filename class="directory">../</filename> is also okay) (<u:bug>51316</u:bug>).
			</simpara></listitem>
			<listitem><simpara>
					During the update to UCS 5.0, objects from deprecated UCS versions are deleted from the LDAP directory. Information about deleted objects and the objects LDIF output can be found in the logfile <filename>/var/univention-backup/update-to-5.0-0/removed_with_ucs5_<literal>timestamp</literal>.ldif</filename> (<u:bug>51655</u:bug>).
			</simpara></listitem>
		</itemizedlist>
	</section>

	<section id="changelog:lib">
		<title>Univention base libraries</title>
		<itemizedlist>
			<listitem><simpara>
					Documentation for the &ucsUCRV;s <envar>groups/default/*</envar> and <envar>users/default/*</envar> has been added (<u:bug>33693</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
					The implementations of <classname>UCS_Version</classname> in <package>univention-updater</package> has been merged into the implementation in <package>univention-lib</package> (<u:bug>32821</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				The scripts in <package>univention-lib</package> are now using Python 3 (<u:bug>51628</u:bug>, <u:bug>51429</u:bug>, <u:bug>52155</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				The matching of locales in <package>univention.lib.i18n</package> has been corrected (<u:bug>51633</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				The logging of error messages from <command>slapdtest</command> in <package>univention.lib.ldap_extension</package> has been improved (<u:bug>51648</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				The function <command>lookup_adds_dc</command> in <package>univention.lib.admember</package> now runs <command>dig</command> with the option <wordasword>+nocookie</wordasword> to avoid <wordasword>FORMERR</wordasword> from Windows DCs (<u:bug>51652</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				 UDM extensions can now be registered in different versions for different UCS versions to prepare for the UCS 5 update (<u:bug>51619</u:bug>, <u:bug>51622</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				 UDM and LDAP extensions are now correctly removed or created when the UCS version changes (<u:bug>51531</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				The <package>univention.fstab</package> library has been merged into <package>univention.lib.fstab</package> (<u:bug>27825</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				The <package>univention-python</package> library has been migrated to Python 3. Various modules have been removed (<u:bug>52063</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				<command>ucs_registerLDAPExtension</command> now waits correctly for the registered &ucsUDM; extension files to be replicated (<u:bug>52942</u:bug>)
			</simpara></listitem>
		</itemizedlist>
	</section>

	<section id="changelog:deployment">
		<title>Software deployment</title>
		<itemizedlist>
			<listitem><simpara>
					 (<u:bug>00000</u:bug>)
			</simpara></listitem>
		</itemizedlist>

		<section id="changelog:deployment:pkgdb">
			<title>Software monitor</title>
			<itemizedlist>
				<listitem><simpara>
					A package dependency cycle has been fixed (<u:bug>42287</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:deployment:cli">
			<title>Software deployment command line tools</title>
			<itemizedlist>
				<listitem><simpara>
					 (<u:bug>00000</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>
	</section>

	<section id="changelog:service">
		<title>System services</title>

		<section id="changelog:service:postgresql">
			<title>PostgreSQL</title>
			<itemizedlist>
				<listitem><simpara>
					 (<u:bug>00000</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:mysql">
			<title>MariaDB</title>
			<itemizedlist>
				<listitem><simpara>
					The package <package>univention-mysql</package> has been removed in favor of MariaDB (<u:bug>51979</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					 (<u:bug>00000</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:docker">
			<title>Docker</title>
			<itemizedlist>
				<listitem><simpara>
					<package>docker</package> has been updated to version 19.03; <package>docker-compose</package> has been updated to version 1.25 (<u:bug>52838</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:saml">
			<title>SAML</title>
			<itemizedlist>
				<listitem><simpara>
					All scripts of <package>univention-saml</package> have been migrated to Python 3 (<u:bug>51315</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The package <package>crudesaml</package> was updated to version 1.9 (<u:bug>51489</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:selfservice">
			<title>Univention self service</title>
			<itemizedlist>
				<listitem><simpara>
					 (<u:bug>00000</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:mail">
			<title>Mail services</title>
			<itemizedlist>
				<listitem><simpara>
					The <systemitem class="service">fetchmail</systemitem> service will be disabled via the &ucsUCRV; <envar>fetchmail/autostart</envar>
					for the time of the update to prevent restart issues during the update (<u:bug>52923</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The ACL handling of user names and group names containing spaces has been fixed for shared folders (<u:bug>53111</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					An internal change to the listener module for shared mail folders
					(<filename>dovecot-shared-folder.py</filename>) has been made to prevent
					problems with mixed upper and lowercase domain names (<u:bug>52241</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					Error messages during initial installation of <package>univention-mail-postfix</package>
					are now prevented by reordering of the internal installation steps (<u:bug>52842</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					Starting with UCS 5.0 the package <package>univention-mail-postfix</package> is now
					mandatory installed on every UCS system. The sole installation of the virtual package
					<package>mail-transport-agent</package> is no longer sufficient (<u:bug>52807</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					No longer needed &ucsUCRV; <envar>mail/dovecot/auth/allowplaintext</envar> was dropped from the package
					<package>univention-mail-dovecot</package> because of Dovecot no longer allowing to login
					with plain text passwords while using TLS/SSL (<u:bug>52724</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The package <package>univention-fetchmail</package> has been migrated to Python 3 (<u:bug>52282</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The package <package>univention-mail-postfix</package> has been migrated to Python 3 (<u:bug>52255</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The package <package>univention-mail-dovecot</package> has been migrated to Python 3 (<u:bug>52254</u:bug>).
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:dovecot">
			<title>Dovecot</title>
			<itemizedlist>
				<listitem><simpara>
					 (<u:bug>00000</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:postfix">
			<title>Postfix</title>
			<itemizedlist>
				<listitem><simpara>
					 (<u:bug>00000</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:virus">
			<title>Spam/virus detection and countermeasures</title>
			<itemizedlist>
				<listitem><simpara>
					 (<u:bug>00000</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:print">
			<title>Printing services</title>
			<itemizedlist>
				<listitem><simpara>
						The package <package>univention-check-printers</package> for checking USB printers has been removed (<u:bug>52123</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The package <package>univention-printclient</package> has been migrated to Python 3 (<u:bug>52423</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					Support for the printer quota system PyKota has been removed as the important is no longer maintained upstream (<u:bug>51482</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:nagios">
			<title>Nagios</title>
			<itemizedlist>
				<listitem><simpara>
					The package <package>univention-nagios-server</package> has been removed (<u:bug>52122</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:apache">
			<title>Apache</title>
			<itemizedlist>
				<listitem><simpara>
					 (<u:bug>00000</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:radius">
			<title>RADIUS</title>
			<itemizedlist>
				<listitem><simpara>
					The package <package>univention-radius</package> has been migrated to Python 3 (<u:bug>52286</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:proxy">
			<title>Proxy services</title>
			<itemizedlist>
				<listitem><simpara>
					 (<u:bug>00000</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:kerberos">
			<title>Kerberos</title>
			<itemizedlist>
				<listitem><simpara>
					Heimdal is now compiled with <package>python3-univention-lib</package> (<u:bug>52249</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The package <package>univention-heimdal</package> has been migrated to Python 3 (<u:bug>52257</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:ssl">
			<title>SSL</title>
			<itemizedlist>
				<listitem><simpara>
					<package>OpenSSL</package> has been updated to version 1.1.1d.
					This raises the minimal required TLS protocol version to TLS 1.2.
				</simpara></listitem>
				<listitem><simpara>
					The package <package>univention-ssl</package> has been migrated to Python 3 (<u:bug>52281</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:celery">
			<title>Celery services</title>
			<itemizedlist>
				<listitem><simpara>
					The package <package>univention-celery</package> has been removed (<u:bug>51486</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:systeminfo">
			<title>Univention System Info</title>
			<itemizedlist>
				<listitem><simpara>
					 (<u:bug>00000</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:dhcp">
			<title>DHCP server</title>
			<itemizedlist>
				<listitem><simpara>
					The Python code has been converted to Python 3 (<u:bug>52259</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:pam">
			<title>PAM / Local group cache</title>
			<itemizedlist>
				<listitem><simpara>
					Fix LDAP filter syntax in &ucsUDL; module <filename>faillog.py</filename> (<u:bug>28645</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					Several potential buffer overruns have been fixed in <package>pam-univentionmailcyrus</package> (<u:bug>51981</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The package <package>univention-skel</package> has been removed.
					Newly created <filename class="directory">$HOME</filename> directories can now be provisioned using the standard directory <filename class="directory">/etc/skel/</filename>. Customers relying on files under <filename class="directory">/etc/univention/skel/</filename> should migrate the files to the new location (<u:bug>43211</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The packages <package>univention-passwd-cache</package> and <package>univention-passwd-store</package> have been removed (<u:bug>52056</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The package <package>univention-pam</package> has been migrated to Python 3 (<u:bug>52250</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					 (<u:bug>00000</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:nfs">
			<title>NFS</title>
			<itemizedlist>
				<listitem><simpara>
					The package <package>univention-nfs</package> has been migrated to Python 3 (<u:bug>52269</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:backup">
			<title>Bacula and Backup</title>
			<itemizedlist>
				<listitem><simpara>
						The component package <package>univention-bacula</package> has been removed in favor of the different backup Apps available from &ucsAppC; (<u:bug>46588</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
						The package <package>univention-remote-backup</package> has been removed (<u:bug>52120</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:service:other">
			<title>Other services</title>
			<itemizedlist>
				<listitem><simpara>
						The packages <package>univention-snmp</package> and <package>univention-snmpd</package> have been removed (<u:bug>52121</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The package <package>univention-directory-logger</package> has been migrated to Python 3 (<u:bug>52301</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The package <package>univention-server-overview</package> has been migrated to Python 3 (<u:bug>51328</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>
	</section>

	<section id="changelog:virt">
		<title>Virtualization</title>
		<itemizedlist>
			<listitem><simpara>
				All packages related to running virtual machines on UCS have been removed (<u:bug>51982</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				In case the <package>libvirt-daemon</package> is still installed, the services <literal>libvirtd.service</literal>
				resp. <literal>virtlogd.service</literal> are stopped and masked prior to the update to UCS 5.0. After the update,
				both services are set to the old state (enabled, disabled, masked) (<u:bug>52974</u:bug>).
			</simpara></listitem>
		</itemizedlist>

		<section id="changelog:virt:operation">
			<title>Operate UCS as virtual machine</title>
			<itemizedlist>
				<listitem><simpara>
					 (<u:bug>00000</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>
	</section>

	<section id="changelog:container">
		<title>Container Technologies</title>
		<itemizedlist>
			<listitem><simpara>
					 (<u:bug>00000</u:bug>)
			</simpara></listitem>
		</itemizedlist>
	</section>

	<section id="changelog:win">
		<title>Services for Windows</title>

		<section id="changelog:win:samba">
			<title>Samba</title>
			<itemizedlist>
				<listitem>
					<para>
						Samba has been updated to version 4.13.7 (<u:bug>49898</u:bug>).
						It also includes the patch for the security issue CVE-2021-20254 (<u:bug>53069</u:bug>).
						Some highlights, quoting upstream release notes:
					</para>
					<itemizedlist>
						<listitem><simpara>
							Extensive efforts have been made to optimized Samba for use in organizations (for example) targeting 100,000 users, plus 120,000 computer objects, as well as large number of group memberships.
							Many of the specific efforts are detailed below, but the net results is to remove barriers to significantly larger Samba deployments compared to previous releases.
						</simpara></listitem>
						<listitem><simpara>
							The LDAP server has improved memory efficiency, ensuring that large LDAP responses (for example a search for all objects) is not copied multiple times into memory.
						</simpara></listitem>
						<listitem><simpara>
							Search performance on large LDB databases has been improved by reducing memory allocations made on each object.
						</simpara></listitem>
						<listitem><simpara>
							Samba uses a new index format allowing Samba to efficiently select objects changed since the last replication cycle, using LDAP search filter relations &lt;= and &gt;=.
							This in turn improves performance during replication of large domains.
						</simpara></listitem>
						<listitem><simpara>
							Please note that the default backend key value store TDB, used by Samba/AD for its <filename>sam.ldb</filename> database, is size limited.
							This should be considered when designing or growing a domain into larger dimensions.
							Since this is a limit of the backend key value store, it doesn't directly translate into a fixed limit for LDAP objects,
							as it depends on the number of attributes, if the attributes are indexed and other factors like these.
							The size limit of TDB is due to its 32-bit data model. This may impact update scenarios in particular, where Samba/AD
							re-keys and re-indexes the data transparently on the first startup. Since this happens in a single transaction,
							the storage requirement doubles temporarily. To avoid issues, UCS checks the current size of the SAM backend databases before updating
							and will abort with a warning if the update may run in danger to render Samba/AD into a non-functional state.
							Workarounds for this are conceivable, but the exact details depend on the topology of the specific UCS domain.
							In particular, Samba/AD offers an alternative implementation for the key value store, which is based on the same LMDB database
							technology that backs the high consistency and performance demands of OpenLDAP.
						</simpara></listitem>
						<listitem><simpara>
							To improve performance during batch operations i.e. joins, LDB now accepts a <option>batch_mode</option> option.
							However to prevent any index or database inconsistencies if an operation fails, the entire transaction will be aborted at commit.
						</simpara></listitem>
						<listitem><simpara>
							Default AD schema for new installations changed from <literal>2008_R2</literal> to <literal>2012_R2</literal>.
							<literal>2012_R2</literal> <emphasis>functional level</emphasis> is not yet available.
						</simpara></listitem>
					</itemizedlist>
					<para>
						Some notable changes:
					</para>
					<itemizedlist>
						<listitem><simpara>
							SMB1 is disabled by default.
							The default for the <filename>smb.conf</filename> parameters <literal>server min protocol</literal>
							and <literal>server min protocol</literal> has been increased from <literal>NT1</literal> to <literal>SMB2_02</literal>.
							This means clients without support for <literal>SMB2</literal> or <literal>SMB3</literal> are no longer able to connect to <systemitem class="service">smbd</systemitem> (by default).
							It also means client tools like <command>smbclient</command> and other are no longer able to connect to servers without <literal>SMB2</literal> or <literal>SMB3</literal> support (by default).
							As Microsoft no longer installs SMB1 support in recent releases or un-installs it after 30 days without usage, the Samba Team tries to get remove the SMB1 usage as much as possible.
							<literal>SMB1</literal> is officially deprecated and might be removed step by step in the following years.
						</simpara></listitem>
						<listitem><simpara>
							The default for the <option>--model</option> argument passed to the samba executable has changed from <literal>standard</literal> to <literal>prefork</literal>.
							This means a difference in the number of samba child processes that are created to handle client connections.
							The previous default would create a separate process for every <literal>LDAP</literal> or <literal>NETLOGON</literal> client connection.
							For a network with a lot of persistent client connections, this could result in significant memory overhead.
							Now, with the new default of <literal>prefork</literal>, the <literal>LDAP</literal>, <literal>NETLOGON</literal>, and <literal>KDC</literal> services will create a fixed number of worker processes at startup and share the client connections amongst these workers.
							The number of worker processes can be configured by the <option>prefork children</option> setting in the <filename>smb.conf</filename> (the default is 4).
							Currently this is not yet configurable via &ucsUCRV;, but can be adjusted via <filename>/etc/samba/local.conf</filename>.
							If this becomes a popular request, adding the configuration option via &ucsUCRV; may be useful in the future.
						</simpara></listitem>
						<listitem><simpara>
							Samba 4.11 has changed how the AD database is stored on disk.
							Samba/AD users should not really be affected by this change when upgrading from 4.10.
							The database will automatically get rewritten in the new 4.11 format when you first start the upgraded samba executable.
							However, when downgrading from 4.11 you will need to manually downgrade the AD database yourself.
							When either upgrading or downgrading, users should also avoid making any database modifications between installing the new Samba packages and starting the samba executable.
						</simpara></listitem>
						<listitem><simpara>
							Since the Samba 4.12 release, support for <literal>DES</literal> encryption types has been removed, and setting <literal>DES_ONLY</literal> flag for an account will cause Kerberos authentication to fail for that account (see <u:rfc>6649</u:rfc>).
							DES keys no longer saved in the AD DB.
							When a new password is set for an account, Samba DCs will store random keys in DB instead of <literal>DES</literal> keys derived from the password.
						</simpara></listitem>
						<listitem><simpara>
							The <filename>smb.conf</filename> parameter <option>encrypt passwords</option> is deprecated (Default: <literal>yes</literal>).
							The &ucsUCRV; <envar>samba/encrypt_passwords</envar> has been obsoleted by this.
						</simpara></listitem>
						<listitem><simpara>
							The default for the <filename>smb.conf</filename> parameter <option>mangled names</option> has changed from <literal>yes</literal> to <literal>illegal</literal>.
						</simpara></listitem>
						<listitem><simpara>
							The <filename>smb.conf</filename> parameter <option>blocking locks</option> is deprecated and the <filename>samba-shares.py</filename> listener module doesn't write it into share configurations any longer.
						</simpara></listitem>
					</itemizedlist>
					<para>
						For more information see also:
					</para>
					<itemizedlist>
						<listitem>
							<simpara><ulink url="https://wiki.samba.org/index.php/Samba_4.11_Features_added/changed#NEW_FEATURES.2FCHANGES">Samba 4.11 Features added/changed</ulink></simpara>
						</listitem>
						<listitem>
							<simpara><ulink url="https://wiki.samba.org/index.php/Samba_4.12_Features_added/changed#NEW_FEATURES.2FCHANGES">Samba 4.12 Features added/changed</ulink></simpara>
						</listitem>
						<listitem>
							<simpara><ulink url="https://wiki.samba.org/index.php/Samba_4.13_Features_added/changed#NEW_FEATURES.2FCHANGES">Samba 4.13 Features added/changed</ulink></simpara>
						</listitem>
					</itemizedlist>
					<warning>
						<para>
							Please avoid to set <literal>server schannel = no</literal> and <literal>server schannel = auto</literal> on all Samba domain controllers due to the well-known <foreignphrase>ZeroLogon</foreignphrase> issue.
							For details see <ulink url="https://wiki.samba.org/index.php/CVE-2020-1472">CVE-2020-1472</ulink>.
						</para>
					</warning>
					<warning>
						<para>
							Please consult UCS documentation sources before attempting to change settings from the UCS defaults, which are not (yet) accessible via &ucsUCRV;s.
							Only settings described in the UCS manual are officially supported.
						</para>
					</warning>
				</listitem>
				<listitem><simpara>
					Samba/AD now evaluates Active Directory ACLs for LDAP searches by default. Technically this was done by changing the default for the &ucsUCRV; <envar>samba/acl_search</envar> to <emphasis>yes</emphasis> (<u:bug>51522</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The package <package>cifs-utils</package> is now installed by default (<u:bug>39259</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The scripts in <package>univention-samba</package> and <package>univention-samba4</package> are now running with Python 3 (<u:bug>52045</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					<package>univention-samba</package> has been adjusted to properly restart samba during package updates in case <application>smbd</application> was running (<u:bug>47367</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The package <package>univention-samba-slave-pdc</package> has been removed (<u:bug>52943</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The package <package>univention-samba4wins</package> has been removed (<u:bug>51497</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The package <package>univention-samba4</package> now installs <filename>/usr/share/univention-samba4/scripts/migrate_legacy_dns_zones.sh</filename> (<u:bug>53093</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:win:takeover">
			<title>Univention AD Takeover</title>
			<itemizedlist>
				<listitem><simpara>
					AD-Takeover now runs with Python 3 (<u:bug>51324</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:win:s4c">
			<title>Univention S4 Connector</title>
			<itemizedlist>
				<listitem><simpara>
					The <application>univention-s4-connector</application> is now running with Python 3 (<u:bug>52043</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The listener module <filename>s4-connector</filename> has been adjusted to avoid repeated restarts of the <application>univention-s4-connector</application> in quick succession during module initialization (<u:bug>52681</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The name of the &ucsUCRV; <envar>connector/s4/mapping/sid/sid_to_ucs</envar> has been fixed in the registration to match the name <envar>connector/s4/mapping/sid_to_ucs</envar> which is actually set and used (<u:bug>53023</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>

		<section id="changelog:win:adc">
			<title>Univention Active Directory Connection</title>
			<itemizedlist>
				<listitem><simpara>
					The <application>univention-ad-connector</application> is now running with Python 3 (<u:bug>52044</u:bug>).
					The logfile <filename>/var/log/univention/connector.log</filename> has been renamed to <filename>/var/log/univention/connector-ad.log</filename>.
					The script <command>univention-connector-list-rejected</command> has been renamed to <command>univention-adconnector-list-rejected</command>.
					The mapping has been migrated from a &ucsUCR; template into a Python file (<filename>/etc/univention/connector/ad/mapping.py</filename>).
				</simpara></listitem>
				<listitem><simpara>
					The obsolete dependency on <filename>pysqlite2</filename> has been removed (<u:bug>51484</u:bug>).
				</simpara></listitem>
				<listitem><simpara>
					The &ucsUMC; module now runs with Python 3 (<u:bug>51336</u:bug>)
				</simpara></listitem>
				<listitem><simpara>
					The <filename>admember</filename> code now runs with Python 2 as well as with Python 3 (<u:bug>51324</u:bug>)
				</simpara></listitem>
			</itemizedlist>
		</section>
	</section>

	<section id="changelog:other">
		<title>Other changes</title>
		<itemizedlist>
			<listitem><simpara>
					All links to <uri>forum.univention.de</uri> have been updated to point to <ulink url="https://help.univention.com/"/> now (<u:bug>43926</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				The package <package>univention-java</package> has been removed (<u:bug>51983</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				The desktop package <package>univention-kde</package> has been removed (<u:bug>51977</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				The package <package>univention-ftp</package> has been removed (<u:bug>51980</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				<package>univention-debhelper</package> now propagates failures and aborts if calling programs fail (<u:bug>50100</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				The package <package>dansguardian</package> has been removed (<u:bug>51483</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				The package <package>univention-debootstrap</package> has been removed(<u:bug>52124</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				The package <package>univention-ucs-translation-template</package> has been renamed to <package>univention-l10n</package>.
				To simplify software development it now provides the sequence <command>univention-l10n</command> to be used with <command>dh --with univention-l10n</command> in <filename>debian/rules</filename> instead of calling <command>univention-l10n-*</command> directly (<u:bug>51656</u:bug>)
			</simpara></listitem>
			<listitem><simpara>
				All deprecated <function>univention.debug.function()</function> calls have been removed from the code (<u:bug>51200</u:bug>)
			</simpara></listitem>
		</itemizedlist>
	</section>

</chapter>
<!-- vim: set ts=4 sw=4 noet: -->
